#ifndef IDOL_JULIA_MODULE_H
#define IDOL_JULIA_MODULE_H

#ifdef IDOL_USE_JULIA
#define IDOL_JUMP_MODULE_BASE64 "bW9kdWxlIElkb2xKdU1QCgogICAgdXNpbmcgSnVNUAoKICAgIHN0cnVjdCBPYmplY3RzCiAgICAgICAgbW9kZWw6OkFueQogICAgICAgIHZhcmlhYmxlczo6VmVjdG9ye1ZhcmlhYmxlUmVmfQogICAgICAgIGNvbnN0cmFpbnRzOjpWZWN0b3J7Q29uc3RyYWludFJlZn0KICAgIGVuZAoKICAgIGNvbnN0IF9yZWdpc3RyeSA9IERpY3R7VUludDY0LCBPYmplY3RzfSgpCiAgICBjb25zdCBfaWRfY291bnRlciA9IFJlZihVSW50NjQoMCkpCgogICAgZnVuY3Rpb24gX2dldF9uZXh0X2lkKCkKICAgICAgICBjdXJyZW50X2lkID0gX2lkX2NvdW50ZXJbXQogICAgICAgIF9pZF9jb3VudGVyW10gKz0gMQogICAgICAgIHJldHVybiBjdXJyZW50X2lkCiAgICBlbmQKCiAgICBmdW5jdGlvbiBpZG9sX2NyZWF0ZV9tb2RlbCh0X29wdGltaXplcl9zdHI6OlR5cGV7PDpNT0kuQWJzdHJhY3RPcHRpbWl6ZXJ9KQogICAgICAgIGlkID0gX2dldF9uZXh0X2lkKCkKICAgICAgICBtb2RlbCA9IE1vZGVsKHRfb3B0aW1pemVyX3N0cikKICAgICAgICBAb2JqZWN0aXZlKG1vZGVsLCBNaW4sIDApCiAgICAgICAgX3JlZ2lzdHJ5W2lkXSA9IE9iamVjdHMobW9kZWwsIFtdLCBbXSkKICAgICAgICByZXR1cm4gaWQKICAgIGVuZAoKICAgIGZ1bmN0aW9uIGlkb2xfZGVsZXRlX21vZGVsKHRfaWQ6OlVJbnQ2NCkKICAgICAgICBpZiBoYXNrZXkoX3JlZ2lzdHJ5LCB0X2lkKQogICAgICAgICAgICBkZWxldGUhKF9yZWdpc3RyeSwgdF9pZCkKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGZ1bmN0aW9uIGlkb2xfY3JlYXRlX3ZhcmlhYmxlKHRfaWQ6OlVJbnQ2NCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0X2xiOjpGbG9hdDY0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRfdWI6OkZsb2F0NjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdF9vYmo6OkZsb2F0NjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdF90eXBlOjpVSW50MTYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdF9uYW1lOjpTdHJpbmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgb2JqID0gX3JlZ2lzdHJ5W3RfaWRdCiAgICAgICAgbW9kZWwgPSBvYmoubW9kZWwKCiAgICAgICAgaWYgdF90eXBlID09IDAKICAgICAgICAgICAgdmFyID0gQHZhcmlhYmxlKG1vZGVsLCBiYXNlX25hbWU9dF9uYW1lKQogICAgICAgIGVsc2VpZiB0X3R5cGUgPT0gMQogICAgICAgICAgICB2YXIgPSBAdmFyaWFibGUobW9kZWwsIGJhc2VfbmFtZT10X25hbWUsIGludGVnZXIgPSB0cnVlKQogICAgICAgIGVsc2VpZiB0X3R5cGUgPT0gMgogICAgICAgICAgICB2YXIgPSBAdmFyaWFibGUobW9kZWwsIGJhc2VfbmFtZT10X25hbWUsIGJpbmFyeSA9IHRydWUpCiAgICAgICAgZWxzZQogICAgICAgICAgICBlcnJvcigiSW52YWxpZCB2YXJpYWJsZSB0eXBlIikKICAgICAgICBlbmQKCiAgICAgICAgc2V0X2xvd2VyX2JvdW5kKHZhciwgdF9sYikKICAgICAgICBzZXRfdXBwZXJfYm91bmQodmFyLCB0X3ViKQogICAgICAgIHNldF9vYmplY3RpdmVfY29lZmZpY2llbnQobW9kZWwsIHZhciwgdF9vYmopCgogICAgICAgIHB1c2ghKG9iai52YXJpYWJsZXMsIHZhcikKCiAgICAgICAgcmV0dXJuIHZhcgogICAgZW5kCgogICAgZnVuY3Rpb24gaWRvbF9jcmVhdGVfY29uc3RyYWludCh0X2lkOjpVSW50NjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0X3Zhcl9pbmRpY2VzOjpWZWN0b3J7VUludDY0fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRfY29lZmZzOjpWZWN0b3J7RmxvYXQ2NH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0X3Joczo6RmxvYXQ2NCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRfdHlwZTo6VUludDE2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdF9uYW1lOjpTdHJpbmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgb2JqID0gX3JlZ2lzdHJ5W3RfaWRdCiAgICAgICAgbW9kZWwgPSBvYmoubW9kZWwKICAgICAgICB2YXJzID0gb2JqLnZhcmlhYmxlcwoKICAgICAgICBpZiBsZW5ndGgodF92YXJfaW5kaWNlcykgIT0gbGVuZ3RoKHRfY29lZmZzKQogICAgICAgICAgICBlcnJvcigiTWlzbWF0Y2ggYmV0d2VlbiB2YXJpYWJsZSBpbmRpY2VzIGFuZCBjb2VmZmljaWVudHMiKQogICAgICAgIGVuZAoKICAgICAgICBleHByID0gc3VtKHRfY29lZmZzW2ldICogdmFyc1t0X3Zhcl9pbmRpY2VzW2ldKzFdIGZvciBpIGluIDE6bGVuZ3RoKHRfdmFyX2luZGljZXMpKQoKICAgICAgICBpZiB0X3R5cGUgPT0gMAogICAgICAgICAgICBjb24gPSBAY29uc3RyYWludChtb2RlbCwgZXhwciA8PSB0X3JocywgYmFzZV9uYW1lPXRfbmFtZSkKICAgICAgICBlbHNlaWYgdF90eXBlID09IDEKICAgICAgICAgICAgY29uID0gQGNvbnN0cmFpbnQobW9kZWwsIGV4cHIgPj0gdF9yaHMsIGJhc2VfbmFtZT10X25hbWUpCiAgICAgICAgZWxzZWlmIHRfdHlwZSA9PSAyCiAgICAgICAgICAgIGNvbiA9IEBjb25zdHJhaW50KG1vZGVsLCBleHByID09IHRfcmhzLCBiYXNlX25hbWU9dF9uYW1lKQogICAgICAgIGVsc2UKICAgICAgICAgICAgZXJyb3IoIkludmFsaWQgY29uc3RyYWludCB0eXBlIikKICAgICAgICBlbmQKCiAgICAgICAgcHVzaCEob2JqLmNvbnN0cmFpbnRzLCBjb24pCgogICAgZW5kCgogICAgZnVuY3Rpb24gaWRvbF9wcmludF9tb2RlbCh0X2lkOjpVSW50NjQpCiAgICAgICAgb2JqID0gX3JlZ2lzdHJ5W3RfaWRdCiAgICAgICAgcHJpbnRsbigiTW9kZWwgSUQ6IiwgdF9pZCkKICAgICAgICBwcmludGxuKG9iai5tb2RlbCkKICAgICAgICBwcmludGxuKCJWYXJpYWJsZXM6Iiwgb2JqLnZhcmlhYmxlcykKICAgICAgICBwcmludGxuKCJDb25zdHJhaW50czoiLCBvYmouY29uc3RyYWludHMpCiAgICBlbmQKCiAgICBmdW5jdGlvbiBpZG9sX29wdGltaXplKHRfaWQ6OlVJbnQ2NCkKICAgICAgICBvYmogPSBfcmVnaXN0cnlbdF9pZF0KICAgICAgICBvcHRpbWl6ZSEob2JqLm1vZGVsKQogICAgZW5kCgogICAgZnVuY3Rpb24gaWRvbF9nZXRfc3RhdHVzKHRfaWQ6OlVJbnQ2NCk6OlVJbnQxNgoKICAgICAgICBtb2RlbCA9IF9yZWdpc3RyeVt0X2lkXS5tb2RlbAogICAgICAgIHRlcm1fc3RhdHVzID0gTU9JLmdldChtb2RlbCwgTU9JLlRlcm1pbmF0aW9uU3RhdHVzKCkpCiAgICAgICAgcHJpbWFsX3N0YXR1cyA9IE1PSS5nZXQobW9kZWwsIE1PSS5QcmltYWxTdGF0dXMoKSkKCiAgICAgICAgaWYgdGVybV9zdGF0dXMgPT0gTU9JLk9QVElNQUwKICAgICAgICAgICAgcmV0dXJuIDEKICAgICAgICBlbHNlaWYgdGVybV9zdGF0dXMgPT0gTU9JLklORkVBU0lCTEUKICAgICAgICAgICAgcmV0dXJuIDMKICAgICAgICBlbHNlaWYgdGVybV9zdGF0dXMgPT0gTU9JLkRVQUxfSU5GRUFTSUJMRQogICAgICAgICAgICByZXR1cm4gNQogICAgICAgIGVsc2VpZiBwcmltYWxfc3RhdHVzID09IE1PSS5GRUFTSUJMRV9QT0lOVAogICAgICAgICAgICByZXR1cm4gMgogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGZ1bmN0aW9uIGlkb2xfZ2V0X3JlYXNvbih0X2lkOjpVSW50NjQpOjpVSW50MTYKICAgICAgICBtb2RlbCA9IF9yZWdpc3RyeVt0X2lkXS5tb2RlbAogICAgICAgIHRlcm1fc3RhdHVzID0gTU9JLmdldChtb2RlbCwgTU9JLlRlcm1pbmF0aW9uU3RhdHVzKCkpCgogICAgICAgIGlmIHRlcm1fc3RhdHVzID09IE1PSS5PUFRJTUFMCiAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgZWxzZWlmIHRlcm1fc3RhdHVzID09IE1PSS5JTkZFQVNJQkxFCiAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgZWxzZWlmIHRlcm1fc3RhdHVzID09IE1PSS5EVUFMX0lORkVBU0lCTEUKICAgICAgICAgICAgcmV0dXJuIDEKICAgICAgICBlbHNlaWYgdGVybV9zdGF0dXMgPT0gTU9JLlRJTUVfTElNSVQKICAgICAgICAgICAgcmV0dXJuIDIKICAgICAgICBlbHNlaWYgdGVybV9zdGF0dXMgPT0gTU9JLklURVJBVElPTl9MSU1JVAogICAgICAgICAgICByZXR1cm4gMwogICAgICAgIGVsc2VpZiB0ZXJtX3N0YXR1cyA9PSBNT0kuTk9ERV9MSU1JVAogICAgICAgICAgICByZXR1cm4gMwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGZ1bmN0aW9uIGlkb2xfZ2V0X3Zhcl9wcmltYWwodF9pZDo6VUludDY0LCB0X3Zhcl9pbmRleDo6VUludDY0KQogICAgICAgIG9iaiA9IF9yZWdpc3RyeVt0X2lkXQogICAgICAgIG1vZGVsID0gb2JqLm1vZGVsCiAgICAgICAgdmFyID0gb2JqLnZhcmlhYmxlc1t0X3Zhcl9pbmRleCArIDFdCiAgICAgICAgcmV0dXJuIHZhbHVlKHZhcikKICAgIGVuZAoKICAgIGZ1bmN0aW9uIGlkb2xfZ2V0X2N0cl9kdWFsKHRfaWQ6OlVJbnQ2NCwgdF9jdHJfaW5kZXg6OlVJbnQ2NCkKICAgICAgICBvYmogPSBfcmVnaXN0cnlbdF9pZF0KICAgICAgICBtb2RlbCA9IG9iai5tb2RlbAogICAgICAgIGN0ciA9IG9iai5jb25zdHJhaW50c1t0X2N0cl9pbmRleCArIDFdCiAgICAgICAgcmV0dXJuIGR1YWwoY3RyKQogICAgZW5kCgogICAgZnVuY3Rpb24gaWRvbF9nZXRfYmVzdF9vYmoodF9pZDo6VUludDY0KTo6RmxvYXQ2NAogICAgICAgIG9iaiA9IF9yZWdpc3RyeVt0X2lkXQogICAgICAgIG1vZGVsID0gb2JqLm1vZGVsCiAgICAgICAgcmV0dXJuIG9iamVjdGl2ZV92YWx1ZShtb2RlbCkKICAgIGVuZAoKICAgIGZ1bmN0aW9uIGlkb2xfZ2V0X2Jlc3RfYm91bmQodF9pZDo6VUludDY0KTo6RmxvYXQ2NAogICAgICAgIG9iaiA9IF9yZWdpc3RyeVt0X2lkXQogICAgICAgIG1vZGVsID0gb2JqLm1vZGVsCiAgICAgICAgcmV0dXJuIG9iamVjdGl2ZV9ib3VuZChtb2RlbCkKICAgIGVuZAoKICAgIGZ1bmN0aW9uIGlkb2xfdXBkYXRlX29iamVjdGl2ZV9zZW5zZSh0X2lkOjpVSW50NjQsIHRfc2Vuc2U6OlVJbnQxNikKICAgICAgICBvYmogPSBfcmVnaXN0cnlbdF9pZF0KICAgICAgICBtb2RlbCA9IG9iai5tb2RlbAoKICAgICAgICBNT0kuc2V0KG1vZGVsLCBNT0kuT2JqZWN0aXZlU2Vuc2UoKSwgdF9zZW5zZSA9PSAwID8gTU9JLk1JTl9TRU5TRSA6IE1PSS5NQVhfU0VOU0UpCiAgICBlbmQKCiAgICBleHBvcnQgaWRvbF9jcmVhdGVfbW9kZWwsCiAgICAgICAgICAgaWRvbF9kZWxldGVfbW9kZWwsCiAgICAgICAgICAgaWRvbF9jcmVhdGVfdmFyaWFibGUsCiAgICAgICAgICAgaWRvbF9jcmVhdGVfY29uc3RyYWludCwKICAgICAgICAgICBpZG9sX3ByaW50X21vZGVsLAogICAgICAgICAgIGlkb2xfb3B0aW1pemUsCiAgICAgICAgICAgaWRvbF9nZXRfc3RhdHVzLAogICAgICAgICAgIGlkb2xfZ2V0X3JlYXNvbiwKICAgICAgICAgICBpZG9sX2dldF92YXJfcHJpbWFsLAogICAgICAgICAgIGlkb2xfZ2V0X2N0cl9kdWFsLAogICAgICAgICAgIGlkb2xfZ2V0X2Jlc3Rfb2JqLAogICAgICAgICAgIGlkb2xfZ2V0X2Jlc3RfYm91bmQsCiAgICAgICAgICAgaWRvbF91cGRhdGVfb2JqZWN0aXZlX3NlbnNlCmVuZAoKdXNpbmcgLi5JZG9sSnVNUA=="
#define IDOL_COLUNA_MODULE_BASE64 "bW9kdWxlIElkb2xDb2x1bmEKCiAgICB1c2luZyAuLklkb2xKdU1QCiAgICB1c2luZyBCbG9ja0RlY29tcG9zaXRpb24sIENvbHVuYQoKICAgIGZ1bmN0aW9uIGlkb2xfY3JlYXRlX2Jsb2NrX21vZGVsKHRfb3B0aW1pemVyOjpUeXBlezw6TU9JLkFic3RyYWN0T3B0aW1pemVyfSkKICAgICAgICBpZCA9IGdldF9uZXh0X2lkKCkKCiAgICAgICAgY29sdW5hID0gb3B0aW1pemVyX3dpdGhfYXR0cmlidXRlcygKICAgICAgICAgICAgQ29sdW5hLk9wdGltaXplciwKICAgICAgICAgICAgInBhcmFtcyIgPT4gQ29sdW5hLlBhcmFtcygKICAgICAgICAgICAgICAgIHNvbHZlcj1Db2x1bmEuQWxnb3JpdGhtLlRyZWVTZWFyY2hBbGdvcml0aG0oCiAgICAgICAgICAgICAgICAgICAgY29ucXVlcmFsZz1Db2x1bmEuQ29sQ3V0R2VuQ29ucXVlcigpCiAgICAgICAgICAgICAgICApICMjIGRlZmF1bHQgYnJhbmNoLWN1dC1hbmQtcHJpY2UKICAgICAgICAgICAgKSwKICAgICAgICAgICAgImRlZmF1bHRfb3B0aW1pemVyIiA9PiB0X29wdGltaXplcgogICAgICAgICk7CgogICAgICAgIG1vZGVsID0gQmxvY2tEZWNvbXBvc2l0aW9uLkJsb2NrTW9kZWwoY29sdW5hKQogICAgICAgIEBvYmplY3RpdmUobW9kZWwsIE1pbiwgMCkKICAgICAgICByZWdpc3RyeVtpZF0gPSBPYmplY3RzKG1vZGVsLCBbXSwgW10pCiAgICAgICAgcmV0dXJuIGlkCiAgICBlbmQKCiAgICBmdW5jdGlvbiBpZG9sX29wdGltaXplX2RhbnR6aWdfd29sZmUodF9pZDo6VUludDY0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0X2N0cl9hbm5vdGF0aW9uczo6VmVjdG9ye1VJbnQ2NH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRfdmFyX2Fubm90YXRpb25zOjpWZWN0b3J7VUludDY0fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdF9tYXN0ZXJfaWQ6OlVJbnQ2NCkKCiAgICAgICAgb2JqID0gcmVnaXN0cnlbdF9pZF0KICAgICAgICBtb2RlbCA9IG9iai5tb2RlbAoKICAgICAgICBkaWZmID0gc2V0ZGlmZih0X2N0cl9hbm5vdGF0aW9ucywgW3RfbWFzdGVyX2lkXSkKICAgICAgICBuX3N1Yl9wcm9ibGVtcyA9IG1heGltdW0oZGlmZiwgaW5pdCA9IDApICsgMQoKICAgICAgICBAYXhpcyhNX2F4aXMsIDE6bl9zdWJfcHJvYmxlbXMpCgogICAgICAgICMgQW5ub3RhdGUgY29uc3RyYWludHMKICAgICAgICBmb3IgKGlkeCwgYmxvY2tfaWQpIGluIGVudW1lcmF0ZSh0X2N0cl9hbm5vdGF0aW9ucykKICAgICAgICAgICAgY3RyID0gb2JqLmNvbnN0cmFpbnRzW2lkeF0KICAgICAgICAgICAgaWYgYmxvY2tfaWQgIT0gdF9tYXN0ZXJfaWQKICAgICAgICAgICAgICAgIEJsb2NrRGVjb21wb3NpdGlvbi5zZXRhbm5vdGF0aW9uIShtb2RlbCwgY3RyLCBNX2F4aXNbYmxvY2tfaWQrMV0pCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICAjIEFubm90YXRlIHZhcmlhYmxlcwogICAgICAgIGZvciAoaWR4LCBibG9ja19pZCkgaW4gZW51bWVyYXRlKHRfdmFyX2Fubm90YXRpb25zKQogICAgICAgICAgICB2YXIgPSBvYmoudmFyaWFibGVzW2lkeF0KICAgICAgICAgICAgaWYgYmxvY2tfaWQgIT0gdF9tYXN0ZXJfaWQKICAgICAgICAgICAgICAgIEJsb2NrRGVjb21wb3NpdGlvbi5zZXRhbm5vdGF0aW9uIShtb2RlbCwgdmFyLCBNX2F4aXNbYmxvY2tfaWQrMV0pCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICBpZiBsZW5ndGgoZGlmZikgPiAwCiAgICAgICAgICAgIEBkYW50emlnX3dvbGZlX2RlY29tcG9zaXRpb24obW9kZWwsIGRlY29tcG9zaXRpb24sIE1fYXhpcykKICAgICAgICBlbmQKCiAgICAgICAgb3B0aW1pemUhKG1vZGVsKQoKICAgIGVuZAoKICAgIGV4cG9ydCBpZG9sX2NyZWF0ZV9ibG9ja19tb2RlbCwKICAgICAgICAgICBpZG9sX29wdGltaXplX2RhbnR6aWdfd29sZmUKCmVuZAoKdXNpbmcgLi5JZG9sQ29sdW5h"
#else
#define IDOL_JULIA_MODULE_BASE64 ""
#define IDOL_COLUNA_MODULE_BASE64 ""
#endif

#endif
