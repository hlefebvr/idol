#ifndef IDOL_JULIA_MODULE_H
#define IDOL_JULIA_MODULE_H

#ifdef IDOL_USE_JULIA
#define IDOL_JULIA_MODULE_BASE64 "bW9kdWxlIENwcEp1TVAKCiAgICB1c2luZyBKdU1QCgogICAgc3RydWN0IE9iamVjdHMKICAgICAg\
ICBtb2RlbDo6QW55CiAgICAgICAgdmFyaWFibGVzOjpWZWN0b3J7VmFyaWFibGVSZWZ9CiAgICAg\
ICAgY29uc3RyYWludHM6OlZlY3RvcntDb25zdHJhaW50UmVmfQogICAgZW5kCgogICAgY29uc3Qg\
cmVnaXN0cnkgPSBEaWN0e1VJbnQ2NCwgT2JqZWN0c30oKQogICAgY29uc3QgaWRfY291bnRlciA9\
IFJlZigwKQoKICAgIGZ1bmN0aW9uIGdldF9uZXh0X2lkKCkKICAgICAgICBjdXJyZW50X2lkID0g\
aWRfY291bnRlcltdCiAgICAgICAgaWRfY291bnRlcltdICs9IDEKICAgICAgICByZXR1cm4gY3Vy\
cmVudF9pZAogICAgZW5kCgogICAgZnVuY3Rpb24gY3JlYXRlX21vZGVsKHRfb3B0aW1pemVyX3N0\
cjo6VHlwZXs8Ok1PSS5BYnN0cmFjdE9wdGltaXplcn0pCiAgICAgICAgaWQgPSBnZXRfbmV4dF9p\
ZCgpCiAgICAgICAgbW9kZWwgPSBNb2RlbCh0X29wdGltaXplcl9zdHIpCiAgICAgICAgQG9iamVj\
dGl2ZShtb2RlbCwgTWluLCAwKQogICAgICAgIHJlZ2lzdHJ5W2lkXSA9IE9iamVjdHMobW9kZWws\
IFtdLCBbXSkKICAgICAgICByZXR1cm4gaWQKICAgIGVuZAoKICAgIGZ1bmN0aW9uIGRlbGV0ZV9t\
b2RlbCh0X2lkOjpVSW50NjQpCiAgICAgICAgcHJpbnQoIlByZXBhcmUgdG8gZGVsZXRlIG1vZGVs\
ICIsIHRfaWQpCiAgICAgICAgaWYgaGFza2V5KHJlZ2lzdHJ5LCB0X2lkKQogICAgICAgICAgICBk\
ZWxldGUhKHJlZ2lzdHJ5LCB0X2lkKQogICAgICAgIGVuZAogICAgZW5kCgogICAgZnVuY3Rpb24g\
Y3JlYXRlX3ZhcmlhYmxlKHRfaWQ6OlVJbnQ2NCwKICAgICAgICAgICAgICAgICAgICAgICAgICAg\
ICB0X2xiOjpGbG9hdDY0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRfdWI6OkZsb2F0\
NjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdF9vYmo6OkZsb2F0NjQsCiAgICAgICAg\
ICAgICAgICAgICAgICAgICAgICAgdF90eXBlOjpVSW50MTYsCiAgICAgICAgICAgICAgICAgICAg\
ICAgICAgICAgdF9uYW1lOjpTdHJpbmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAg\
ICAgICAgb2JqID0gcmVnaXN0cnlbdF9pZF0KICAgICAgICBtb2RlbCA9IG9iai5tb2RlbAoKICAg\
ICAgICB2YXJfbmFtZSA9IFN5bWJvbCh0X25hbWUpCgogICAgICAgIGlmIHRfdHlwZSA9PSAwCiAg\
ICAgICAgICAgIEBldmFsIHZhciA9IEB2YXJpYWJsZSgkbW9kZWwsICQodmFyX25hbWUpKQogICAg\
ICAgIGVsc2VpZiB0X3R5cGUgPT0gMQogICAgICAgICAgICBAZXZhbCB2YXIgPSBAdmFyaWFibGUo\
JG1vZGVsLCAkKHZhcl9uYW1lKSwgaW50ZWdlciA9IHRydWUpCiAgICAgICAgZWxzZWlmIHRfdHlw\
ZSA9PSAyCiAgICAgICAgICAgIEBldmFsIHZhciA9IEB2YXJpYWJsZSgkbW9kZWwsICQodmFyX25h\
bWUpLCBiaW5hcnkgPSB0cnVlKQogICAgICAgIGVsc2UKICAgICAgICAgICAgZXJyb3IoIkludmFs\
aWQgdmFyaWFibGUgdHlwZSIpCiAgICAgICAgZW5kCgogICAgICAgIHNldF9sb3dlcl9ib3VuZCh2\
YXIsIHRfbGIpCiAgICAgICAgc2V0X3VwcGVyX2JvdW5kKHZhciwgdF91YikKICAgICAgICBzZXRf\
b2JqZWN0aXZlX2NvZWZmaWNpZW50KG1vZGVsLCB2YXIsIHRfb2JqKQoKICAgICAgICBwdXNoIShv\
YmoudmFyaWFibGVzLCB2YXIpCgogICAgICAgIHJldHVybiB2YXIKICAgIGVuZAoKICAgIGZ1bmN0\
aW9uIGNyZWF0ZV9jb25zdHJhaW50KHRfaWQ6OlVJbnQ2NCwKICAgICAgICAgICAgICAgICAgICAg\
ICAgICAgICAgIHRfdmFyX2luZGljZXM6OlZlY3RvcntVSW50NjR9LAogICAgICAgICAgICAgICAg\
ICAgICAgICAgICAgICAgdF9jb2VmZnM6OlZlY3RvcntGbG9hdDY0fSwKICAgICAgICAgICAgICAg\
ICAgICAgICAgICAgICAgIHRfcmhzOjpGbG9hdDY0LAogICAgICAgICAgICAgICAgICAgICAgICAg\
ICAgICAgdF90eXBlOjpVSW50MTYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0X25h\
bWU6OlN0cmluZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICBvYmog\
PSByZWdpc3RyeVt0X2lkXQogICAgICAgIG1vZGVsID0gb2JqLm1vZGVsCiAgICAgICAgdmFycyA9\
IG9iai52YXJpYWJsZXMKCiAgICAgICAgaWYgbGVuZ3RoKHRfdmFyX2luZGljZXMpICE9IGxlbmd0\
aCh0X2NvZWZmcykKICAgICAgICAgICAgZXJyb3IoIk1pc21hdGNoIGJldHdlZW4gdmFyaWFibGUg\
aW5kaWNlcyBhbmQgY29lZmZpY2llbnRzIikKICAgICAgICBlbmQKCiAgICAgICAgZXhwciA9IHN1\
bSh0X2NvZWZmc1tpXSAqIHZhcnNbdF92YXJfaW5kaWNlc1tpXSsxXSBmb3IgaSBpbiAxOmxlbmd0\
aCh0X3Zhcl9pbmRpY2VzKSkKCiAgICAgICAgY3RyX25hbWUgPSBTeW1ib2wodF9uYW1lKQoKICAg\
ICAgICBpZiB0X3R5cGUgPT0gMAogICAgICAgICAgICBAZXZhbCBjb24gPSBAY29uc3RyYWludCgk\
bW9kZWwsICQoY3RyX25hbWUpLCAkZXhwciA8PSAkdF9yaHMpCiAgICAgICAgZWxzZWlmIHRfdHlw\
ZSA9PSAxCiAgICAgICAgICAgIEBldmFsIGNvbiA9IEBjb25zdHJhaW50KCRtb2RlbCwgJChjdHJf\
bmFtZSksICRleHByID49ICR0X3JocykKICAgICAgICBlbHNlaWYgdF90eXBlID09IDIKICAgICAg\
ICAgICAgQGV2YWwgY29uID0gQGNvbnN0cmFpbnQoJG1vZGVsLCAkKGN0cl9uYW1lKSwgJGV4cHIg\
PT0gJHRfcmhzKQogICAgICAgIGVsc2UKICAgICAgICAgICAgZXJyb3IoIkludmFsaWQgY29uc3Ry\
YWludCB0eXBlIikKICAgICAgICBlbmQKCiAgICAgICAgcHVzaCEob2JqLmNvbnN0cmFpbnRzLCBj\
b24pCgogICAgZW5kCgogICAgZnVuY3Rpb24gcHJpbnRfbW9kZWwodF9pZDo6SW50NjQpCiAgICAg\
ICAgb2JqID0gcmVnaXN0cnlbdF9pZF0KICAgICAgICBwcmludGxuKCJNb2RlbCBJRDoiLCB0X2lk\
KQogICAgICAgIHByaW50bG4ob2JqLm1vZGVsKQogICAgICAgIHByaW50bG4oIlZhcmlhYmxlczoi\
LCBvYmoudmFyaWFibGVzKQogICAgICAgIHByaW50bG4oIkNvbnN0cmFpbnRzOiIsIG9iai5jb25z\
dHJhaW50cykKICAgIGVuZAoKICAgIGZ1bmN0aW9uIG9wdGltaXplKHRfaWQ6OkludDY0KQogICAg\
ICAgIG9iaiA9IHJlZ2lzdHJ5W3RfaWRdCiAgICAgICAgb3B0aW1pemUhKG9iai5tb2RlbCkKICAg\
IGVuZAoKICAgIGZ1bmN0aW9uIGdldF9zdGF0dXModF9pZDo6VUludDY0KTo6VUludDE2CgogICAg\
ICAgIG1vZGVsID0gcmVnaXN0cnlbdF9pZF0ubW9kZWwKICAgICAgICB0ZXJtX3N0YXR1cyA9IE1P\
SS5nZXQobW9kZWwsIE1PSS5UZXJtaW5hdGlvblN0YXR1cygpKQogICAgICAgIHByaW1hbF9zdGF0\
dXMgPSBNT0kuZ2V0KG1vZGVsLCBNT0kuUHJpbWFsU3RhdHVzKCkpCgogICAgICAgIGlmIHRlcm1f\
c3RhdHVzID09IE1PSS5PUFRJTUFMCiAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgZWxzZWlm\
IHRlcm1fc3RhdHVzID09IE1PSS5JTkZFQVNJQkxFCiAgICAgICAgICAgIHJldHVybiAzCiAgICAg\
ICAgZWxzZWlmIHRlcm1fc3RhdHVzID09IE1PSS5EVUFMX0lORkVBU0lCTEUKICAgICAgICAgICAg\
cmV0dXJuIDUKICAgICAgICBlbHNlaWYgcHJpbWFsX3N0YXR1cyA9PSBNT0kuRkVBU0lCTEVfUE9J\
TlQKICAgICAgICAgICAgcmV0dXJuIDIKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJldHVybiAw\
CiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBmdW5jdGlvbiBnZXRfcmVhc29uKHRfaWQ6OlVJbnQ2\
NCk6OlVJbnQxNgogICAgICAgIG1vZGVsID0gcmVnaXN0cnlbdF9pZF0ubW9kZWwKICAgICAgICB0\
ZXJtX3N0YXR1cyA9IE1PSS5nZXQobW9kZWwsIE1PSS5UZXJtaW5hdGlvblN0YXR1cygpKQoKICAg\
ICAgICBpZiB0ZXJtX3N0YXR1cyA9PSBNT0kuT1BUSU1BTAogICAgICAgICAgICByZXR1cm4gMQog\
ICAgICAgIGVsc2VpZiB0ZXJtX3N0YXR1cyA9PSBNT0kuSU5GRUFTSUJMRQogICAgICAgICAgICBy\
ZXR1cm4gMQogICAgICAgIGVsc2VpZiB0ZXJtX3N0YXR1cyA9PSBNT0kuRFVBTF9JTkZFQVNJQkxF\
CiAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgZWxzZWlmIHRlcm1fc3RhdHVzID09IE1PSS5U\
SU1FX0xJTUlUCiAgICAgICAgICAgIHJldHVybiAyCiAgICAgICAgZWxzZWlmIHRlcm1fc3RhdHVz\
ID09IE1PSS5JVEVSQVRJT05fTElNSVQKICAgICAgICAgICAgcmV0dXJuIDMKICAgICAgICBlbHNl\
aWYgdGVybV9zdGF0dXMgPT0gTU9JLk5PREVfTElNSVQKICAgICAgICAgICAgcmV0dXJuIDMKICAg\
ICAgICBlbHNlCiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBm\
dW5jdGlvbiBnZXRfdmFyX3ByaW1hbCh0X2lkOjpVSW50NjQsIHRfdmFyX2luZGV4OjpVSW50NjQp\
CiAgICAgICAgb2JqID0gcmVnaXN0cnlbdF9pZF0KICAgICAgICBtb2RlbCA9IG9iai5tb2RlbAog\
ICAgICAgIHZhciA9IG9iai52YXJpYWJsZXNbdF92YXJfaW5kZXggKyAxXQogICAgICAgIHJldHVy\
biB2YWx1ZSh2YXIpCiAgICBlbmQKCiAgICBmdW5jdGlvbiBnZXRfYmVzdF9vYmoodF9pZDo6VUlu\
dDY0KTo6RmxvYXQ2NAogICAgICAgIG9iaiA9IHJlZ2lzdHJ5W3RfaWRdCiAgICAgICAgbW9kZWwg\
PSBvYmoubW9kZWwKICAgICAgICByZXR1cm4gb2JqZWN0aXZlX3ZhbHVlKG1vZGVsKQogICAgZW5k\
CgogICAgZnVuY3Rpb24gZ2V0X2Jlc3RfYm91bmQodF9pZDo6VUludDY0KTo6RmxvYXQ2NAogICAg\
ICAgIG9iaiA9IHJlZ2lzdHJ5W3RfaWRdCiAgICAgICAgbW9kZWwgPSBvYmoubW9kZWwKICAgICAg\
ICByZXR1cm4gb2JqZWN0aXZlX2JvdW5kKG1vZGVsKQogICAgZW5kCgogICAgZnVuY3Rpb24gdXBk\
YXRlX29iamVjdGl2ZV9zZW5zZSh0X2lkOjpVSW50NjQsIHRfc2Vuc2U6OlVJbnQxNikKICAgICAg\
ICBvYmogPSByZWdpc3RyeVt0X2lkXQogICAgICAgIG1vZGVsID0gb2JqLm1vZGVsCgogICAgICAg\
IE1PSS5zZXQobW9kZWwsIE1PSS5PYmplY3RpdmVTZW5zZSgpLCB0X3NlbnNlID09IDAgPyBNT0ku\
TUlOX1NFTlNFIDogTU9JLk1BWF9TRU5TRSkKICAgIGVuZAoKICAgIGV4cG9ydCBjcmVhdGVfbW9k\
ZWwKICAgIGV4cG9ydCBkZWxldGVfbW9kZWwKICAgIGV4cG9ydCBjcmVhdGVfdmFyaWFibGUKICAg\
IGV4cG9ydCBjcmVhdGVfY29uc3RyYWludAogICAgZXhwb3J0IHByaW50X21vZGVsCiAgICBleHBv\
cnQgb3B0aW1pemUKICAgIGV4cG9ydCBnZXRfdmFyX3ByaW1hbAogICAgZXhwb3J0IHJlZ2lzdHJ5\
CiAgICBleHBvcnQgZ2V0X25leHRfaWQKICAgIGV4cG9ydCBPYmplY3RzCiAgICBleHBvcnQgZ2V0\
X3N0YXR1cwogICAgZXhwb3J0IGdldF9yZWFzb24KICAgIGV4cG9ydCBnZXRfYmVzdF9vYmoKICAg\
IGV4cG9ydCBnZXRfYmVzdF9ib3VuZAogICAgZXhwb3J0IHVwZGF0ZV9vYmplY3RpdmVfc2Vuc2UK\
CmVuZAoKbW9kdWxlIENwcENvbHVuYQoKICAgIHVzaW5nIC4uQ3BwSnVNUAogICAgdXNpbmcgSnVN\
UAogICAgdXNpbmcgQmxvY2tEZWNvbXBvc2l0aW9uLCBDb2x1bmEKCiAgICBmdW5jdGlvbiBjcmVh\
dGVfYmxvY2tfbW9kZWwodF9vcHRpbWl6ZXI6OlR5cGV7PDpNT0kuQWJzdHJhY3RPcHRpbWl6ZXJ9\
KQogICAgICAgIGlkID0gZ2V0X25leHRfaWQoKQoKICAgICAgICBjb2x1bmEgPSBvcHRpbWl6ZXJf\
d2l0aF9hdHRyaWJ1dGVzKAogICAgICAgICAgICBDb2x1bmEuT3B0aW1pemVyLAogICAgICAgICAg\
ICAicGFyYW1zIiA9PiBDb2x1bmEuUGFyYW1zKAogICAgICAgICAgICAgICAgc29sdmVyPUNvbHVu\
YS5BbGdvcml0aG0uVHJlZVNlYXJjaEFsZ29yaXRobSgKICAgICAgICAgICAgICAgICAgICBjb25x\
dWVyYWxnPUNvbHVuYS5Db2xDdXRHZW5Db25xdWVyKCkKICAgICAgICAgICAgICAgICkgIyMgZGVm\
YXVsdCBicmFuY2gtY3V0LWFuZC1wcmljZQogICAgICAgICAgICApLAogICAgICAgICAgICAiZGVm\
YXVsdF9vcHRpbWl6ZXIiID0+IHRfb3B0aW1pemVyCiAgICAgICAgKTsKCiAgICAgICAgbW9kZWwg\
PSBCbG9ja0RlY29tcG9zaXRpb24uQmxvY2tNb2RlbChjb2x1bmEpCiAgICAgICAgQG9iamVjdGl2\
ZShtb2RlbCwgTWluLCAwKQogICAgICAgIHJlZ2lzdHJ5W2lkXSA9IE9iamVjdHMobW9kZWwsIFtd\
LCBbXSkKICAgICAgICByZXR1cm4gaWQKICAgIGVuZAoKICAgIGZ1bmN0aW9uIG9wdGltaXplX2Rh\
bnR6aWdfd29sZmUodF9pZDo6VUludDY0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\
ICAgICB0X2N0cl9hbm5vdGF0aW9uczo6VmVjdG9ye1VJbnQ2NH0sCiAgICAgICAgICAgICAgICAg\
ICAgICAgICAgICAgICAgICAgIHRfdmFyX2Fubm90YXRpb25zOjpWZWN0b3J7VUludDY0fSwKICAg\
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdF9tYXN0ZXJfaWQ6OlVJbnQ2NCkKCiAg\
ICAgICAgb2JqID0gcmVnaXN0cnlbdF9pZF0KICAgICAgICBtb2RlbCA9IG9iai5tb2RlbAoKICAg\
ICAgICBkaWZmID0gc2V0ZGlmZih0X2N0cl9hbm5vdGF0aW9ucywgW3RfbWFzdGVyX2lkXSkKICAg\
ICAgICBuX3N1Yl9wcm9ibGVtcyA9IG1heGltdW0oZGlmZiwgaW5pdCA9IDApICsgMQoKICAgICAg\
ICBAYXhpcyhNX2F4aXMsIDE6bl9zdWJfcHJvYmxlbXMpCgogICAgICAgICMgQW5ub3RhdGUgY29u\
c3RyYWludHMKICAgICAgICBmb3IgKGlkeCwgYmxvY2tfaWQpIGluIGVudW1lcmF0ZSh0X2N0cl9h\
bm5vdGF0aW9ucykKICAgICAgICAgICAgY3RyID0gb2JqLmNvbnN0cmFpbnRzW2lkeF0KICAgICAg\
ICAgICAgaWYgYmxvY2tfaWQgIT0gdF9tYXN0ZXJfaWQKICAgICAgICAgICAgICAgIEJsb2NrRGVj\
b21wb3NpdGlvbi5zZXRhbm5vdGF0aW9uIShtb2RlbCwgY3RyLCBNX2F4aXNbYmxvY2tfaWQrMV0p\
CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICAjIEFubm90YXRlIHZhcmlhYmxl\
cwogICAgICAgIGZvciAoaWR4LCBibG9ja19pZCkgaW4gZW51bWVyYXRlKHRfdmFyX2Fubm90YXRp\
b25zKQogICAgICAgICAgICB2YXIgPSBvYmoudmFyaWFibGVzW2lkeF0KICAgICAgICAgICAgaWYg\
YmxvY2tfaWQgIT0gdF9tYXN0ZXJfaWQKICAgICAgICAgICAgICAgIEJsb2NrRGVjb21wb3NpdGlv\
bi5zZXRhbm5vdGF0aW9uIShtb2RlbCwgdmFyLCBNX2F4aXNbYmxvY2tfaWQrMV0pCiAgICAgICAg\
ICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICBpZiBsZW5ndGgoZGlmZikgPiAwCiAgICAgICAg\
ICAgIEBkYW50emlnX3dvbGZlX2RlY29tcG9zaXRpb24obW9kZWwsIGRlY29tcG9zaXRpb24sIE1f\
YXhpcykKICAgICAgICBlbmQKCiAgICAgICAgb3B0aW1pemUhKG1vZGVsKQoKICAgIGVuZAoKICAg\
IGV4cG9ydCBvcHRpbWl6ZV9kYW50emlnX3dvbGZlCiAgICBleHBvcnQgY3JlYXRlX2Jsb2NrX21v\
ZGVsCmVuZAo="
#else
#define IDOL_JULIA_MODULE_BASE64 ""
#endif

#endif
