#ifndef IDOL_JULIA_MODULE_H
#define IDOL_JULIA_MODULE_H

#ifdef IDOL_USE_JULIA
#define IDOL_JULIA_MODULE_BASE64 "bW9kdWxlIENwcEp1TVAKCiAgICB1c2luZyBKdU1QCgogICAgc3RydWN0IE9iamVjdHMKICAgICAg\
ICBtb2RlbDo6QW55CiAgICAgICAgdmFyaWFibGVzOjpWZWN0b3J7VmFyaWFibGVSZWZ9CiAgICAg\
ICAgY29uc3RyYWludHM6OlZlY3RvcntDb25zdHJhaW50UmVmfQogICAgZW5kCgogICAgY29uc3Qg\
cmVnaXN0cnkgPSBEaWN0e1VJbnQ2NCwgT2JqZWN0c30oKQogICAgY29uc3QgaWRfY291bnRlcjo6\
VUludDY0ID0gUmVmKDApCgogICAgZnVuY3Rpb24gZ2V0X25leHRfaWQoKQogICAgICAgIGN1cnJl\
bnRfaWQgPSBpZF9jb3VudGVyW10KICAgICAgICBpZF9jb3VudGVyW10gKz0gMQogICAgICAgIHJl\
dHVybiBjdXJyZW50X2lkCiAgICBlbmQKCiAgICBmdW5jdGlvbiBjcmVhdGVfbW9kZWwodF9vcHRp\
bWl6ZXJfc3RyOjpUeXBlezw6TU9JLkFic3RyYWN0T3B0aW1pemVyfSkKICAgICAgICBpZCA9IGdl\
dF9uZXh0X2lkKCkKICAgICAgICBtb2RlbCA9IE1vZGVsKHRfb3B0aW1pemVyX3N0cikKICAgICAg\
ICBAb2JqZWN0aXZlKG1vZGVsLCBNaW4sIDApCiAgICAgICAgcmVnaXN0cnlbaWRdID0gT2JqZWN0\
cyhtb2RlbCwgW10sIFtdKQogICAgICAgIHJldHVybiBpZAogICAgZW5kCgogICAgZnVuY3Rpb24g\
ZGVsZXRlX21vZGVsKHRfaWQ6OlVJbnQ2NCkKICAgICAgICBpZiBoYXNrZXkocmVnaXN0cnksIHRf\
aWQpCiAgICAgICAgICAgIGRlbGV0ZSEocmVnaXN0cnksIHRfaWQpCiAgICAgICAgZW5kCiAgICBl\
bmQKCiAgICBmdW5jdGlvbiBjcmVhdGVfdmFyaWFibGUodF9pZDo6VUludDY0LAogICAgICAgICAg\
ICAgICAgICAgICAgICAgICAgIHRfbGI6OkZsb2F0NjQsCiAgICAgICAgICAgICAgICAgICAgICAg\
ICAgICAgdF91Yjo6RmxvYXQ2NCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0X29iajo6\
RmxvYXQ2NCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0X3R5cGU6OlVJbnQxNiwKICAg\
ICAgICAgICAgICAgICAgICAgICAgICAgICB0X25hbWU6OlN0cmluZwogICAgICAgICAgICAgICAg\
ICAgICAgICAgICAgICkKICAgICAgICBvYmogPSByZWdpc3RyeVt0X2lkXQogICAgICAgIG1vZGVs\
ID0gb2JqLm1vZGVsCgogICAgICAgIHZhcl9uYW1lID0gU3ltYm9sKHRfbmFtZSkKCiAgICAgICAg\
aWYgdF90eXBlID09IDAKICAgICAgICAgICAgQGV2YWwgdmFyID0gQHZhcmlhYmxlKCRtb2RlbCwg\
JCh2YXJfbmFtZSkpCiAgICAgICAgZWxzZWlmIHRfdHlwZSA9PSAxCiAgICAgICAgICAgIEBldmFs\
IHZhciA9IEB2YXJpYWJsZSgkbW9kZWwsICQodmFyX25hbWUpLCBpbnRlZ2VyID0gdHJ1ZSkKICAg\
ICAgICBlbHNlaWYgdF90eXBlID09IDIKICAgICAgICAgICAgQGV2YWwgdmFyID0gQHZhcmlhYmxl\
KCRtb2RlbCwgJCh2YXJfbmFtZSksIGJpbmFyeSA9IHRydWUpCiAgICAgICAgZWxzZQogICAgICAg\
ICAgICBlcnJvcigiSW52YWxpZCB2YXJpYWJsZSB0eXBlIikKICAgICAgICBlbmQKCiAgICAgICAg\
c2V0X2xvd2VyX2JvdW5kKHZhciwgdF9sYikKICAgICAgICBzZXRfdXBwZXJfYm91bmQodmFyLCB0\
X3ViKQogICAgICAgIHNldF9vYmplY3RpdmVfY29lZmZpY2llbnQobW9kZWwsIHZhciwgdF9vYmop\
CgogICAgICAgIHB1c2ghKG9iai52YXJpYWJsZXMsIHZhcikKCiAgICAgICAgcmV0dXJuIHZhcgog\
ICAgZW5kCgogICAgZnVuY3Rpb24gY3JlYXRlX2NvbnN0cmFpbnQodF9pZDo6VUludDY0LAogICAg\
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdF92YXJfaW5kaWNlczo6VmVjdG9ye1VJbnQ2NH0s\
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0X2NvZWZmczo6VmVjdG9ye0Zsb2F0NjR9\
LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdF9yaHM6OkZsb2F0NjQsCiAgICAgICAg\
ICAgICAgICAgICAgICAgICAgICAgICB0X3R5cGU6OlVJbnQxNiwKICAgICAgICAgICAgICAgICAg\
ICAgICAgICAgICAgIHRfbmFtZTo6U3RyaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\
ICApCgogICAgICAgIG9iaiA9IHJlZ2lzdHJ5W3RfaWRdCiAgICAgICAgbW9kZWwgPSBvYmoubW9k\
ZWwKICAgICAgICB2YXJzID0gb2JqLnZhcmlhYmxlcwoKICAgICAgICBpZiBsZW5ndGgodF92YXJf\
aW5kaWNlcykgIT0gbGVuZ3RoKHRfY29lZmZzKQogICAgICAgICAgICBlcnJvcigiTWlzbWF0Y2gg\
YmV0d2VlbiB2YXJpYWJsZSBpbmRpY2VzIGFuZCBjb2VmZmljaWVudHMiKQogICAgICAgIGVuZAoK\
ICAgICAgICBleHByID0gc3VtKHRfY29lZmZzW2ldICogdmFyc1t0X3Zhcl9pbmRpY2VzW2ldKzFd\
IGZvciBpIGluIDE6bGVuZ3RoKHRfdmFyX2luZGljZXMpKQoKICAgICAgICBjdHJfbmFtZSA9IFN5\
bWJvbCh0X25hbWUpCgogICAgICAgIGlmIHRfdHlwZSA9PSAwCiAgICAgICAgICAgIEBldmFsIGNv\
biA9IEBjb25zdHJhaW50KCRtb2RlbCwgJChjdHJfbmFtZSksICRleHByIDw9ICR0X3JocykKICAg\
ICAgICBlbHNlaWYgdF90eXBlID09IDEKICAgICAgICAgICAgQGV2YWwgY29uID0gQGNvbnN0cmFp\
bnQoJG1vZGVsLCAkKGN0cl9uYW1lKSwgJGV4cHIgPj0gJHRfcmhzKQogICAgICAgIGVsc2VpZiB0\
X3R5cGUgPT0gMgogICAgICAgICAgICBAZXZhbCBjb24gPSBAY29uc3RyYWludCgkbW9kZWwsICQo\
Y3RyX25hbWUpLCAkZXhwciA9PSAkdF9yaHMpCiAgICAgICAgZWxzZQogICAgICAgICAgICBlcnJv\
cigiSW52YWxpZCBjb25zdHJhaW50IHR5cGUiKQogICAgICAgIGVuZAoKICAgICAgICBwdXNoIShv\
YmouY29uc3RyYWludHMsIGNvbikKCiAgICBlbmQKCiAgICBmdW5jdGlvbiBwcmludF9tb2RlbCh0\
X2lkOjpVSW50NjQpCiAgICAgICAgb2JqID0gcmVnaXN0cnlbdF9pZF0KICAgICAgICBwcmludGxu\
KCJNb2RlbCBJRDoiLCB0X2lkKQogICAgICAgIHByaW50bG4ob2JqLm1vZGVsKQogICAgICAgIHBy\
aW50bG4oIlZhcmlhYmxlczoiLCBvYmoudmFyaWFibGVzKQogICAgICAgIHByaW50bG4oIkNvbnN0\
cmFpbnRzOiIsIG9iai5jb25zdHJhaW50cykKICAgIGVuZAoKICAgIGZ1bmN0aW9uIG9wdGltaXpl\
KHRfaWQ6OlVJbnQ2NCkKICAgICAgICBvYmogPSByZWdpc3RyeVt0X2lkXQogICAgICAgIG9wdGlt\
aXplIShvYmoubW9kZWwpCiAgICBlbmQKCiAgICBmdW5jdGlvbiBnZXRfc3RhdHVzKHRfaWQ6OlVJ\
bnQ2NCk6OlVJbnQxNgoKICAgICAgICBtb2RlbCA9IHJlZ2lzdHJ5W3RfaWRdLm1vZGVsCiAgICAg\
ICAgdGVybV9zdGF0dXMgPSBNT0kuZ2V0KG1vZGVsLCBNT0kuVGVybWluYXRpb25TdGF0dXMoKSkK\
ICAgICAgICBwcmltYWxfc3RhdHVzID0gTU9JLmdldChtb2RlbCwgTU9JLlByaW1hbFN0YXR1cygp\
KQoKICAgICAgICBpZiB0ZXJtX3N0YXR1cyA9PSBNT0kuT1BUSU1BTAogICAgICAgICAgICByZXR1\
cm4gMQogICAgICAgIGVsc2VpZiB0ZXJtX3N0YXR1cyA9PSBNT0kuSU5GRUFTSUJMRQogICAgICAg\
ICAgICByZXR1cm4gMwogICAgICAgIGVsc2VpZiB0ZXJtX3N0YXR1cyA9PSBNT0kuRFVBTF9JTkZF\
QVNJQkxFCiAgICAgICAgICAgIHJldHVybiA1CiAgICAgICAgZWxzZWlmIHByaW1hbF9zdGF0dXMg\
PT0gTU9JLkZFQVNJQkxFX1BPSU5UCiAgICAgICAgICAgIHJldHVybiAyCiAgICAgICAgZWxzZQog\
ICAgICAgICAgICByZXR1cm4gMAogICAgICAgIGVuZAogICAgZW5kCgogICAgZnVuY3Rpb24gZ2V0\
X3JlYXNvbih0X2lkOjpVSW50NjQpOjpVSW50MTYKICAgICAgICBtb2RlbCA9IHJlZ2lzdHJ5W3Rf\
aWRdLm1vZGVsCiAgICAgICAgdGVybV9zdGF0dXMgPSBNT0kuZ2V0KG1vZGVsLCBNT0kuVGVybWlu\
YXRpb25TdGF0dXMoKSkKCiAgICAgICAgaWYgdGVybV9zdGF0dXMgPT0gTU9JLk9QVElNQUwKICAg\
ICAgICAgICAgcmV0dXJuIDEKICAgICAgICBlbHNlaWYgdGVybV9zdGF0dXMgPT0gTU9JLklORkVB\
U0lCTEUKICAgICAgICAgICAgcmV0dXJuIDEKICAgICAgICBlbHNlaWYgdGVybV9zdGF0dXMgPT0g\
TU9JLkRVQUxfSU5GRUFTSUJMRQogICAgICAgICAgICByZXR1cm4gMQogICAgICAgIGVsc2VpZiB0\
ZXJtX3N0YXR1cyA9PSBNT0kuVElNRV9MSU1JVAogICAgICAgICAgICByZXR1cm4gMgogICAgICAg\
IGVsc2VpZiB0ZXJtX3N0YXR1cyA9PSBNT0kuSVRFUkFUSU9OX0xJTUlUCiAgICAgICAgICAgIHJl\
dHVybiAzCiAgICAgICAgZWxzZWlmIHRlcm1fc3RhdHVzID09IE1PSS5OT0RFX0xJTUlUCiAgICAg\
ICAgICAgIHJldHVybiAzCiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4gMAogICAgICAg\
IGVuZAogICAgZW5kCgogICAgZnVuY3Rpb24gZ2V0X3Zhcl9wcmltYWwodF9pZDo6VUludDY0LCB0\
X3Zhcl9pbmRleDo6VUludDY0KQogICAgICAgIG9iaiA9IHJlZ2lzdHJ5W3RfaWRdCiAgICAgICAg\
bW9kZWwgPSBvYmoubW9kZWwKICAgICAgICB2YXIgPSBvYmoudmFyaWFibGVzW3RfdmFyX2luZGV4\
ICsgMV0KICAgICAgICByZXR1cm4gdmFsdWUodmFyKQogICAgZW5kCgogICAgZnVuY3Rpb24gZ2V0\
X2Jlc3Rfb2JqKHRfaWQ6OlVJbnQ2NCk6OkZsb2F0NjQKICAgICAgICBvYmogPSByZWdpc3RyeVt0\
X2lkXQogICAgICAgIG1vZGVsID0gb2JqLm1vZGVsCiAgICAgICAgcmV0dXJuIG9iamVjdGl2ZV92\
YWx1ZShtb2RlbCkKICAgIGVuZAoKICAgIGZ1bmN0aW9uIGdldF9iZXN0X2JvdW5kKHRfaWQ6OlVJ\
bnQ2NCk6OkZsb2F0NjQKICAgICAgICBvYmogPSByZWdpc3RyeVt0X2lkXQogICAgICAgIG1vZGVs\
ID0gb2JqLm1vZGVsCiAgICAgICAgcmV0dXJuIG9iamVjdGl2ZV9ib3VuZChtb2RlbCkKICAgIGVu\
ZAoKICAgIGZ1bmN0aW9uIHVwZGF0ZV9vYmplY3RpdmVfc2Vuc2UodF9pZDo6VUludDY0LCB0X3Nl\
bnNlOjpVSW50MTYpCiAgICAgICAgb2JqID0gcmVnaXN0cnlbdF9pZF0KICAgICAgICBtb2RlbCA9\
IG9iai5tb2RlbAoKICAgICAgICBNT0kuc2V0KG1vZGVsLCBNT0kuT2JqZWN0aXZlU2Vuc2UoKSwg\
dF9zZW5zZSA9PSAwID8gTU9JLk1JTl9TRU5TRSA6IE1PSS5NQVhfU0VOU0UpCiAgICBlbmQKCiAg\
ICBleHBvcnQgY3JlYXRlX21vZGVsCiAgICBleHBvcnQgZGVsZXRlX21vZGVsCiAgICBleHBvcnQg\
Y3JlYXRlX3ZhcmlhYmxlCiAgICBleHBvcnQgY3JlYXRlX2NvbnN0cmFpbnQKICAgIGV4cG9ydCBw\
cmludF9tb2RlbAogICAgZXhwb3J0IG9wdGltaXplCiAgICBleHBvcnQgZ2V0X3Zhcl9wcmltYWwK\
ICAgIGV4cG9ydCByZWdpc3RyeQogICAgZXhwb3J0IGdldF9uZXh0X2lkCiAgICBleHBvcnQgT2Jq\
ZWN0cwogICAgZXhwb3J0IGdldF9zdGF0dXMKICAgIGV4cG9ydCBnZXRfcmVhc29uCiAgICBleHBv\
cnQgZ2V0X2Jlc3Rfb2JqCiAgICBleHBvcnQgZ2V0X2Jlc3RfYm91bmQKICAgIGV4cG9ydCB1cGRh\
dGVfb2JqZWN0aXZlX3NlbnNlCgplbmQKCm1vZHVsZSBDcHBDb2x1bmEKCiAgICB1c2luZyAuLkNw\
cEp1TVAKICAgIHVzaW5nIEp1TVAKICAgIHVzaW5nIEJsb2NrRGVjb21wb3NpdGlvbiwgQ29sdW5h\
CgogICAgZnVuY3Rpb24gY3JlYXRlX2Jsb2NrX21vZGVsKHRfb3B0aW1pemVyOjpUeXBlezw6TU9J\
LkFic3RyYWN0T3B0aW1pemVyfSkKICAgICAgICBpZCA9IGdldF9uZXh0X2lkKCkKCiAgICAgICAg\
Y29sdW5hID0gb3B0aW1pemVyX3dpdGhfYXR0cmlidXRlcygKICAgICAgICAgICAgQ29sdW5hLk9w\
dGltaXplciwKICAgICAgICAgICAgInBhcmFtcyIgPT4gQ29sdW5hLlBhcmFtcygKICAgICAgICAg\
ICAgICAgIHNvbHZlcj1Db2x1bmEuQWxnb3JpdGhtLlRyZWVTZWFyY2hBbGdvcml0aG0oCiAgICAg\
ICAgICAgICAgICAgICAgY29ucXVlcmFsZz1Db2x1bmEuQ29sQ3V0R2VuQ29ucXVlcigpCiAgICAg\
ICAgICAgICAgICApICMjIGRlZmF1bHQgYnJhbmNoLWN1dC1hbmQtcHJpY2UKICAgICAgICAgICAg\
KSwKICAgICAgICAgICAgImRlZmF1bHRfb3B0aW1pemVyIiA9PiB0X29wdGltaXplcgogICAgICAg\
ICk7CgogICAgICAgIG1vZGVsID0gQmxvY2tEZWNvbXBvc2l0aW9uLkJsb2NrTW9kZWwoY29sdW5h\
KQogICAgICAgIEBvYmplY3RpdmUobW9kZWwsIE1pbiwgMCkKICAgICAgICByZWdpc3RyeVtpZF0g\
PSBPYmplY3RzKG1vZGVsLCBbXSwgW10pCiAgICAgICAgcmV0dXJuIGlkCiAgICBlbmQKCiAgICBm\
dW5jdGlvbiBvcHRpbWl6ZV9kYW50emlnX3dvbGZlKHRfaWQ6OlVJbnQ2NCwKICAgICAgICAgICAg\
ICAgICAgICAgICAgICAgICAgICAgICAgdF9jdHJfYW5ub3RhdGlvbnM6OlZlY3RvcntVSW50NjR9\
LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0X3Zhcl9hbm5vdGF0aW9uczo6\
VmVjdG9ye1VJbnQ2NH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRfbWFz\
dGVyX2lkOjpVSW50NjQpCgogICAgICAgIG9iaiA9IHJlZ2lzdHJ5W3RfaWRdCiAgICAgICAgbW9k\
ZWwgPSBvYmoubW9kZWwKCiAgICAgICAgZGlmZiA9IHNldGRpZmYodF9jdHJfYW5ub3RhdGlvbnMs\
IFt0X21hc3Rlcl9pZF0pCiAgICAgICAgbl9zdWJfcHJvYmxlbXMgPSBtYXhpbXVtKGRpZmYsIGlu\
aXQgPSAwKSArIDEKCiAgICAgICAgQGF4aXMoTV9heGlzLCAxOm5fc3ViX3Byb2JsZW1zKQoKICAg\
ICAgICAjIEFubm90YXRlIGNvbnN0cmFpbnRzCiAgICAgICAgZm9yIChpZHgsIGJsb2NrX2lkKSBp\
biBlbnVtZXJhdGUodF9jdHJfYW5ub3RhdGlvbnMpCiAgICAgICAgICAgIGN0ciA9IG9iai5jb25z\
dHJhaW50c1tpZHhdCiAgICAgICAgICAgIGlmIGJsb2NrX2lkICE9IHRfbWFzdGVyX2lkCiAgICAg\
ICAgICAgICAgICBCbG9ja0RlY29tcG9zaXRpb24uc2V0YW5ub3RhdGlvbiEobW9kZWwsIGN0ciwg\
TV9heGlzW2Jsb2NrX2lkKzFdKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAg\
IyBBbm5vdGF0ZSB2YXJpYWJsZXMKICAgICAgICBmb3IgKGlkeCwgYmxvY2tfaWQpIGluIGVudW1l\
cmF0ZSh0X3Zhcl9hbm5vdGF0aW9ucykKICAgICAgICAgICAgdmFyID0gb2JqLnZhcmlhYmxlc1tp\
ZHhdCiAgICAgICAgICAgIGlmIGJsb2NrX2lkICE9IHRfbWFzdGVyX2lkCiAgICAgICAgICAgICAg\
ICBCbG9ja0RlY29tcG9zaXRpb24uc2V0YW5ub3RhdGlvbiEobW9kZWwsIHZhciwgTV9heGlzW2Js\
b2NrX2lkKzFdKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgaWYgbGVuZ3Ro\
KGRpZmYpID4gMAogICAgICAgICAgICBAZGFudHppZ193b2xmZV9kZWNvbXBvc2l0aW9uKG1vZGVs\
LCBkZWNvbXBvc2l0aW9uLCBNX2F4aXMpCiAgICAgICAgZW5kCgogICAgICAgIG9wdGltaXplISht\
b2RlbCkKCiAgICBlbmQKCiAgICBleHBvcnQgb3B0aW1pemVfZGFudHppZ193b2xmZQogICAgZXhw\
b3J0IGNyZWF0ZV9ibG9ja19tb2RlbAplbmQK"
#else
#define IDOL_JULIA_MODULE_BASE64 ""
#endif

#endif
